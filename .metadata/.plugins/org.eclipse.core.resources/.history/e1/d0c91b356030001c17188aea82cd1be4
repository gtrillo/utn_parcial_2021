#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "Salon.h"
#include "Arcade.h"
#include "informes.h"
#define ESTADO_LIBRE 1
#define ESTADO_OCUPADO 0
#define TIPO_SHOPPING 1
#define TIPO_LOCAL 2
#define	LEN_CADENA 32
int salon_removeSalon(Salon* listSalon, int lenSalon, Arcade* listArcade, int lenArcade, int id)
{
		int retorno = -1;
		int indice;

		if (listSalon != NULL && lenSalon >0 && listArcade != NULL && lenArcade >0 && id>0)
		{
			for (indice = 0; indice < lenSalon; indice++)
			{
				if (id == listSalon[indice].id && listSalon[indice].flagEmpty == ESTADO_OCUPADO)
				{
					listSalon[indice].flagEmpty = ESTADO_LIBRE;
					retorno = 0;
					for (indice = 0; indice < lenArcade; indice++)
						{
							if (id == listArcade[indice].idSalon && listArcade[indice].flagEmpty == ESTADO_OCUPADO)
							{
								listSalon[indice].flagEmpty = ESTADO_LIBRE;
								retorno = 0;
								break;
							}
							else
							{
								break;
							}
						}
				}
			}
		}
		return retorno;
}
//falta arreglar
int informes_SalonConMas4Arcades (Arcade listArcades[], int lenArcades, Salon listSalones[], int lenSalones)
{

	int retorno = -1;
	int i;
	int j;
	int contador = 0;

	if(listArcades != NULL && lenArcades > 0 && listSalones != NULL && lenSalones > 0)
	{
		retorno = 0;

		for(i = 0; i < lenSalones; i++)
		{
			if(listSalones[i].flagEmpty == ESTADO_OCUPADO)
			{
				contador = 0;

				for(j = 0; j < lenArcades; j++)
				{
					if(listArcades[j].flagEmpty == ESTADO_OCUPADO && listArcades[j].idSalon == listSalones[i].id)
					{
						contador++;
					}
				}

				if(contador > 4)
				{
					switch(listSalones[i].tipo)
					{
					case TIPO_SHOPPING:
						printf("ID :%d - %s - DIRECCION: %s - SHOPING\n", listSalones[i].id, listSalones[i].nombre, listSalones[i].direccion);
						break;
					case TIPO_LOCAL:
						printf("ID :%d - %s - DIRECCION: %s - LOCAL\n", listSalones[i].id, listSalones[i].nombre, listSalones[i].direccion);
						break;
					}
				}

			}
		}
	}

	return retorno;
}
int informes_AParamasDe2Jugadores (Salon listSalones[], int lenSalones, Arcade listArcades[], int lenArcades)
{
	int retorno = -1;
	int i;
	int j;

	if (listSalones != NULL && lenSalones > 0 && listArcades != NULL && lenArcades >0)
	{
		for (i = 0; i < lenArcades; i++)
		{
			if (listArcades[i].cantidadJugadores > 2)
			{
				for (j = 0; j < lenSalones ; j++)
				{
					if (listArcades[i].idSalon == listSalones[j].id)
					{
						printf ("\nID: %d - CANTIDAD DE JUGADORES: %d - NOMBRE DEL JUEGO: %s - NOMBRE DEL SALON: %s", listArcades[i].id, listArcades[i].cantidadJugadores, listArcades[i].nombreDelJuego, listSalones[j].nombre);
						retorno = 0;
						break;
					}
				}
			}
		}
	}
	return retorno;
}

int informes_contadorArcades (Arcade listArcades[], int lenArcades, int idIngresado)
{
	int retorno = -1;
	int contadorArcades;
	int i;

	if(listArcades != NULL && lenArcades > 0 && idIngresado >=0)
	{
		for (i = 0; i< lenArcades; i++)
		{
			if (listArcades [i].flagEmpty == ESTADO_OCUPADO && idIngresado == listArcades[i].idSalon)
			{
				contadorArcades++;
				retorno = contadorArcades;
			}
		}
	}
	return retorno;
}

int informes_ListaArcades (Arcade listArcades[], int lenArcades, Salon listSalones[], int lenSalones ,int idIngresado)
{
	int retorno = -1;
	int i;
	char cadena[LEN_CADENA];
	if (listArcades != NULL && lenArcades > 0 && idIngresado >=0)
	{
		switch(listSalones->tipo)
		{
			case TIPO_SHOPPING:
				strncpy(cadena, "SHOPPING", LEN_CADENA);
				break;
			case TIPO_LOCAL:
				strncpy(cadena, "LOCAL", LEN_CADENA);
				break;
		}
		printf ("\nID: %d - NOMBRE DEL JUEGO: %s - TIPO DE SALON: %s \nJUEGOS:", listSalones[idIngresado].id, listSalones[idIngresado].nombre, cadena);
		for (i = 0; i < lenArcades; i++)
		{
			if(listArcades[i].flagEmpty == ESTADO_OCUPADO &&idIngresado == listArcades[i].idSalon)
			{
				if (arcade_JuegosCargados(listArcades, lenArcades)==0)
				{
					printf ("\n%s",listArcades[i].nombreDelJuego);
					break;
				}
				retorno = 0;
			}
		}
	}
	return retorno;
}
